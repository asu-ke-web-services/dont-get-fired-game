{"metadata":{"modules":{"imports":[{"source":"reflux","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Reflux"}]},{"source":"underscore","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"_"}]},{"source":"../models/game","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Game"}]}],"exports":{"exported":["GameActions","GameStore"],"specifiers":[{"kind":"local","local":"GameActions","exported":"GameActions"},{"kind":"local","local":"GameStore","exported":"GameStore"}]}},"usedHelpers":["interop-require-default"]},"ignored":false,"code":"exports.__esModule = true;\n\nvar _reflux = require('reflux');\n\nvar _reflux2 = babelHelpers.interopRequireDefault(_reflux);\n\nvar _underscore = require('underscore');\n\nvar _underscore2 = babelHelpers.interopRequireDefault(_underscore);\n\nvar _modelsGame = require('../models/game');\n\nvar _modelsGame2 = babelHelpers.interopRequireDefault(_modelsGame);\n\nvar GameActions = _reflux2['default'].createActions(['create']);\n\nvar GameStore = _reflux2['default'].createStore({\n  listenables: [GameActions],\n\n  init: function () {\n    this._create();\n  },\n\n  _create: function () {\n    this._game = new _modelsGame2['default']();\n    this._game.init();\n  },\n\n  create: function () {\n    this._create();\n    this.trigger(this.getInitialState());\n  },\n\n  getInitialState: function () {\n    var game = this._game;\n\n    var state = _underscore2['default'].extend({}, game.company, game.company.getCalculatedMetrics());\n    // TODO wrap in a debug utility\n    // console.log(state);\n    return state;\n  }\n});\n\nexports.GameActions = GameActions;\nexports.GameStore = GameStore;","ast":null,"map":{"version":3,"sources":["/client/stores/game-store.js"],"names":[],"mappings":";;sBAAmB,QAAQ;;;;0BACb,YAAY;;;;0BACM,gBAAgB;;;;AAEhD,IAAI,WAAW,GAAG,oBAAO,aAAa,CAAC,CACrC,QAAQ,CACT,CAAC,CAAC;;AAEH,IAAI,SAAS,GAAG,oBAAO,WAAW,CAAC;AACjC,aAAW,EAAE,CAAE,WAAW,CAAE;;AAE5B,MAAI,EAAA,YAAG;AACL,QAAI,CAAC,OAAO,EAAE,CAAC;GAChB;;AAED,SAAO,EAAA,YAAG;AACR,QAAI,CAAC,KAAK,GAAG,6BAAU,CAAC;AACxB,QAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;GACnB;;AAED,QAAM,EAAA,YAAG;AACP,QAAI,CAAC,OAAO,EAAE,CAAC;AACf,QAAI,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;GACtC;;AAED,iBAAe,EAAA,YAAG;AAChB,QAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;;AAEtB,QAAI,KAAK,GAAG,wBAAE,MAAM,CAChB,EAAE,EACF,IAAI,CAAC,OAAO,EACZ,IAAI,CAAC,OAAO,CAAC,oBAAoB,EAAE,CACtC,CAAC;;;AAGF,WAAO,KAAK,CAAC;GACd;CACF,CAAC,CAAC;;QAEK,WAAW,GAAX,WAAW;QAAE,SAAS,GAAT,SAAS","file":"/client/stores/game-store.js.map","sourcesContent":["import Reflux from 'reflux';\nimport _ from 'underscore';\nimport { default as Game } from '../models/game';\n\nvar GameActions = Reflux.createActions([\n  'create'\n]);\n\nvar GameStore = Reflux.createStore({\n  listenables: [ GameActions ],\n\n  init() {\n    this._create();\n  },\n\n  _create() {\n    this._game = new Game();\n    this._game.init();\n  },\n\n  create() {\n    this._create();\n    this.trigger(this.getInitialState());\n  },\n\n  getInitialState() {\n    let game = this._game;\n\n    let state = _.extend(\n        {},\n        game.company,\n        game.company.getCalculatedMetrics()\n    );\n    // TODO wrap in a debug utility\n    // console.log(state);\n    return state;\n  }\n});\n\nexport {GameActions, GameStore};\n"]},"hash":"0c7e4df9afee01fdbe012b609b5db24e20fc0127"}
