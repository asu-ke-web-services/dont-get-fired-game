{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":["tagged-template-literal-loose","class-call-check","inherits","create-class","extends","bind","object-without-properties","object-destructuring-empty"]},"ignored":false,"code":"var _templateObject = babelHelpers.taggedTemplateLiteralLoose(['A', 'C'], ['\\\\u0041', 'C']);\n\nTinytest.add(\"ecmascript - runtime - template literals\", function (test) {\n  function dump(pieces) {\n    var copy = {};\n    // Can't use _.extend({}, pieces) because es5-shim adds enumerable\n    // methods to Array.prototype, and _.extend has no own property check.\n    _.each(_.keys(pieces), function (key) {\n      return copy[key] = pieces[key];\n    });\n    return [copy, _.toArray(arguments).slice(1)];\n  };\n  var foo = 'B';\n  // uses `babelHelpers.taggedTemplateLiteralLoose`\n  test.equal('A' + foo + 'C', 'ABC');\n  test.equal(dump(_templateObject, foo), [{ 0: 'A', 1: 'C', raw: ['\\\\u0041', 'C'] }, ['B']]);\n});\n\nTinytest.add(\"ecmascript - runtime - classes - basic\", function (test) {\n  {\n    (function () {\n      var Foo = (function () {\n        function Foo(x) {\nbabelHelpers.classCallCheck(this, Foo);\n\n          this.x = x;\n        }\n\n        return Foo;\n      })();\n\n      test.throws(function () {\n        Foo(); // called without `new`\n      });\n\n      test.equal(new Foo(3).x, 3);\n    })();\n  }\n\n  {\n    (function () {\n      var Bar = (function () {\n        function Bar(x) {\nbabelHelpers.classCallCheck(this, Bar);\n\n          this.x = x;\n        }\n\n        return Bar;\n      })();\n\n      var Foo = (function (_Bar) {\nbabelHelpers.inherits(Foo, _Bar);\n\n        function Foo() {\nbabelHelpers.classCallCheck(this, Foo);\n\n          _Bar.apply(this, arguments);\n        }\n\n        return Foo;\n      })(Bar);\n\n      test.throws(function () {\n        Foo(); // called without `new`\n      });\n\n      test.equal(new Foo(3).x, 3);\n      test.isTrue(new Foo(3) instanceof Foo);\n      test.isTrue(new Foo(3) instanceof Bar);\n    })();\n  }\n\n  {\n    (function () {\n      var Foo = (function () {\n        function Foo() {\nbabelHelpers.classCallCheck(this, Foo);\n        }\n\n        Foo.staticMethod = (function () {\n          function staticMethod() {\n            return 'classy';\n          }\n\n          return staticMethod;\n        })();\n\n        Foo.prototype.prototypeMethod = (function () {\n          function prototypeMethod() {\n            return 'prototypical';\n          }\n\n          return prototypeMethod;\n        })();\n\n        return Foo;\n      })();\n\n      test.equal(Foo.staticMethod(), 'classy');\n      test.equal(new Foo().prototypeMethod(), 'prototypical');\n    })();\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - classes - use before declare\", function (test) {\n  var x = (function () {\n    function asdf() {}\n\n    return asdf;\n  })();\n  if (typeof asdf === 'function') {\n    // We seem to be in IE 8, where function names leak into the enclosing\n    // scope, contrary to the spec.  In this case, Babel does not (currently)\n    // throw an error if you use a class before you declare it.  (Of course,\n    // any other browser can tell the developer they screwed up!)\n    test.expect_fail();\n  }\n\n  test.throws(function () {\n    new Foo(); // use before definition\n\n    var Foo = (function () {\n      function Foo() {\nbabelHelpers.classCallCheck(this, Foo);\n      }\n\n      return Foo;\n    })();\n  });\n});\n\nTinytest.add(\"ecmascript - runtime - classes - inheritance\", function (test) {\n\n  // uses `babelHelpers.inherits`\n  {\n    (function () {\n      var Foo = (function () {\n        function Foo() {\nbabelHelpers.classCallCheck(this, Foo);\n        }\n\n        Foo.static1 = (function () {\n          function static1() {\n            return 1;\n          }\n\n          return static1;\n        })();\n\n        return Foo;\n      })();\n\n      Foo.static2 = function () {\n        return 2;\n      };\n\n      // static methods are inherited!\n\n      var Bar = (function (_Foo) {\nbabelHelpers.inherits(Bar, _Foo);\n\n        function Bar() {\nbabelHelpers.classCallCheck(this, Bar);\n\n          _Foo.apply(this, arguments);\n        }\n\n        return Bar;\n      })(Foo);\n\n      test.equal(Foo.static1(), 1);\n      test.equal(Foo.static2(), 2);\n      test.equal(Bar.static1(), 1);\n      test.equal(Bar.static2(), 2);\n    })();\n  }\n\n  {\n    (function () {\n      var buf = [];\n\n      var Foo = (function () {\n        function Foo() {\nbabelHelpers.classCallCheck(this, Foo);\n\n          buf.push('hi');\n        }\n\n        return Foo;\n      })();\n\n      var Bar = (function (_Foo2) {\nbabelHelpers.inherits(Bar, _Foo2);\n\n        function Bar() {\nbabelHelpers.classCallCheck(this, Bar);\n\n          _Foo2.apply(this, arguments);\n        }\n\n        return Bar;\n      })(Foo);\n\n      new Bar();\n      // derived class with no constructor gets a default constructor\n      // that calls the super constructor\n      test.equal(buf, ['hi']);\n    })();\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - classes - computed props\", function (test) {\n  {\n    (function () {\n      var frob = \"inc\";\n\n      var Foo = (function () {\n        function Foo() {\nbabelHelpers.classCallCheck(this, Foo);\n        }\n\n        Foo[frob] = function (n) {\n          return n + 1;\n        };\n\n        return Foo;\n      })();\n\n      test.equal(Foo.inc(3), 4);\n    })();\n  }\n});\n\nif (Meteor.isServer) {\n  // getters and setters don't work in all clients, but they should work\n  // in classes on browsers that support them in the first place, and on\n  // the server.  (Technically they just need a working\n  // Object.defineProperty, found in IE9+ and all modern environments.)\n  Tinytest.add(\"ecmascript - runtime - classes - getters/setters\", function (test) {\n    // uses `babelHelpers.createClass`\n\n    var Foo = (function () {\n      function Foo() {\nbabelHelpers.classCallCheck(this, Foo);\n      }\n\nbabelHelpers.createClass(Foo, [{\n        key: 'two',\n        get: function () {\n          return 1 + 1;\n        }\n      }], [{\n        key: 'three',\n        get: function () {\n          return 1 + 1 + 1;\n        }\n      }]);\n      return Foo;\n    })();\n\n    test.equal(new Foo().two, 2);\n    test.equal(Foo.three, 3);\n  });\n}\n\nTinytest.add(\"ecmascript - runtime - block scope\", function (test) {\n  {\n    (function () {\n      var buf = [];\n      var thunks = [];\n      function print(x) {\n        buf.push(x);\n      };\n      function doLater(f) {\n        thunks.push(f);\n      };\n\n      for (var i = 0; i < 3; i++) {\n        print(i);\n      }\n      test.equal(buf, [0, 1, 2]);\n      buf.length = 0;\n\n      var _loop = function (i) {\n        doLater(function () {\n          print(i);\n        });\n      };\n\n      for (var i = 0; i < 3; i++) {\n        _loop(i);\n      }\n\n      _.each(thunks, function (f) {\n        return f();\n      });\n      test.equal(buf, [0, 1, 2]);\n    })();\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - classes - super\", function (test) {\n  {\n    (function () {\n      var Class1 = (function () {\n        function Class1() {\nbabelHelpers.classCallCheck(this, Class1);\n        }\n\n        Class1.prototype.foo = (function () {\n          function foo() {\n            return 123;\n          }\n\n          return foo;\n        })();\n\n        Class1.bar = (function () {\n          function bar() {\n            return 1;\n          }\n\n          return bar;\n        })();\n\n        return Class1;\n      })();\n\n      var Class2 = (function (_Class1) {\nbabelHelpers.inherits(Class2, _Class1);\n\n        function Class2() {\nbabelHelpers.classCallCheck(this, Class2);\n\n          _Class1.apply(this, arguments);\n        }\n\n        return Class2;\n      })(Class1);\n\n      var Class3 = (function (_Class2) {\nbabelHelpers.inherits(Class3, _Class2);\n\n        function Class3() {\nbabelHelpers.classCallCheck(this, Class3);\n\n          _Class2.apply(this, arguments);\n        }\n\n        Class3.prototype.foo = (function () {\n          function foo() {\n            return _Class2.prototype.foo.call(this) + Class3.bar();\n          }\n\n          return foo;\n        })();\n\n        return Class3;\n      })(Class2);\n\n      test.equal(new Class3().foo(), 124);\n    })();\n  }\n\n  {\n    (function () {\n      var Foo = (function () {\n        function Foo(value) {\nbabelHelpers.classCallCheck(this, Foo);\n          this.value = value;\n        }\n\n        Foo.prototype.x = (function () {\n          function x() {\n            return this.value;\n          }\n\n          return x;\n        })();\n\n        return Foo;\n      })();\n\n      var Bar = (function (_Foo3) {\nbabelHelpers.inherits(Bar, _Foo3);\n\n        function Bar() {\nbabelHelpers.classCallCheck(this, Bar);\n          _Foo3.call(this, 123);\n        }\n\n        Bar.prototype.x = (function () {\n          function x() {\n            return _Foo3.prototype.x.call(this);\n          }\n\n          return x;\n        })();\n\n        return Bar;\n      })(Foo);\n\n      test.equal(new Bar().x(), 123);\n    })();\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - object rest/spread\", function (test) {\n  var middle = { b: 2, c: 3 };\n  // uses `babelHelpers._extends`\n  var full = babelHelpers._extends({ a: 1 }, middle, { d: 4 });\n  test.equal(full, { a: 1, b: 2, c: 3, d: 4 });\n});\n\nTinytest.add(\"ecmascript - runtime - spread args to new\", function (test) {\n\n  var Foo = function (one, two, three) {\n    test.isTrue(this instanceof Foo);\n    test.equal(one, 1);\n    test.equal(two, 2);\n    test.equal(three, 3);\n    this.created = true;\n  };\n\n  var oneTwo = [1, 2];\n\n  // uses `babelHelpers.bind`\n  var foo = new (babelHelpers.bind.apply(Foo, [null].concat(oneTwo, [3])))();\n  test.isTrue(foo.created);\n});\n\nTinytest.add(\"ecmascript - runtime - destructuring\", function (test) {\n  // uses `babelHelpers.objectWithoutProperties` and\n  // `babelHelpers.objectDestructuringEmpty`\n\n  var obj = { a: 1, b: 2 };\n  var a = obj.a;\n  var rest = babelHelpers.objectWithoutProperties(obj, ['a']);\n\n  test.equal(a, 1);\n  test.equal(rest, { b: 2 });\n\n  var _ref = {};\nbabelHelpers.objectDestructuringEmpty(_ref);\n\n  test.throws(function () {\n    var _ref2 = null;\nbabelHelpers.objectDestructuringEmpty(_ref2);\n  }, /Cannot destructure undefined/);\n});\n\nTinytest.addAsync(\"ecmascript - runtime - misc support\", function (test, done) {\n  // Verify that the runtime was installed.\n  test.equal(typeof babelHelpers, \"object\");\n\n  var Base = (function () {\n    function Base() {\n      var _this = this;\n\nbabelHelpers.classCallCheck(this, Base);\n\n      this.sum = 0;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      args.forEach(function (arg) {\n        return _this.sum += arg;\n      });\n    }\n\n    Base.inherited = (function () {\n      function inherited() {\n        return \"inherited\";\n      }\n\n      return inherited;\n    })();\n\n    return Base;\n  })();\n\n  var Derived = (function (_Base) {\nbabelHelpers.inherits(Derived, _Base);\n\n    function Derived() {\nbabelHelpers.classCallCheck(this, Derived);\n\n      _Base.call(this, 1, 2, 3);\n    }\n\n    // Check that static methods are inherited.\n    return Derived;\n  })(Base);\n\n  test.equal(Derived.inherited(), \"inherited\");\n\n  var d = new Derived();\n  test.equal(d.sum, 6);\n\n  var expectedError = new Error(\"expected\");\n\n  Promise.resolve(\"working\").then(function (result) {\n    test.equal(result, \"working\");\n    throw expectedError;\n  })['catch'](function (error) {\n    test.equal(error, expectedError);\n    if (Meteor.isServer) {\n      var Fiber = Npm.require(\"fibers\");\n      // Make sure the Promise polyfill runs callbacks in a Fiber.\n      test.instanceOf(Fiber.current, Fiber);\n    }\n  }).then(done, function (error) {\n    return test.exception(error);\n  });\n});","ast":null,"map":{"version":3,"sources":["/packages/ecmascript/runtime-tests.js"],"names":[],"mappings":"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","file":"/packages/ecmascript/runtime-tests.js.map","sourcesContent":["Tinytest.add(\"ecmascript - runtime - template literals\", (test) => {\n  function dump(pieces) {\n    var copy = {};\n    // Can't use _.extend({}, pieces) because es5-shim adds enumerable\n    // methods to Array.prototype, and _.extend has no own property check.\n    _.each(_.keys(pieces), key => copy[key] = pieces[key]);\n    return [copy, _.toArray(arguments).slice(1)];\n  };\n  const foo = 'B';\n  // uses `babelHelpers.taggedTemplateLiteralLoose`\n  test.equal(`\\u0041${foo}C`, 'ABC');\n  test.equal(dump`\\u0041${foo}C`,\n             [{0:'A', 1: 'C', raw: ['\\\\u0041', 'C']},\n              ['B']]);\n});\n\nTinytest.add(\"ecmascript - runtime - classes - basic\", (test) => {\n  {\n    class Foo {\n      constructor(x) {\n        this.x = x;\n      }\n    }\n\n    test.throws(() => {\n      Foo(); // called without `new`\n    });\n\n    test.equal((new Foo(3)).x, 3);\n  }\n\n  {\n    class Bar {\n      constructor(x) {\n        this.x = x;\n      }\n    }\n    class Foo extends Bar {}\n\n    test.throws(() => {\n      Foo(); // called without `new`\n    });\n\n    test.equal((new Foo(3)).x, 3);\n    test.isTrue((new Foo(3)) instanceof Foo);\n    test.isTrue((new Foo(3)) instanceof Bar);\n  }\n\n  {\n    class Foo {\n      static staticMethod() {\n        return 'classy';\n      }\n\n      prototypeMethod() {\n        return 'prototypical';\n      }\n    }\n\n    test.equal(Foo.staticMethod(), 'classy');\n    test.equal((new Foo).prototypeMethod(), 'prototypical');\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - classes - use before declare\", (test) => {\n  const x = function asdf() {};\n  if (typeof asdf === 'function') {\n    // We seem to be in IE 8, where function names leak into the enclosing\n    // scope, contrary to the spec.  In this case, Babel does not (currently)\n    // throw an error if you use a class before you declare it.  (Of course,\n    // any other browser can tell the developer they screwed up!)\n    test.expect_fail();\n  }\n\n  test.throws(() => {\n    new Foo(); // use before definition\n    class Foo {}\n  });\n});\n\n\nTinytest.add(\"ecmascript - runtime - classes - inheritance\", (test) => {\n\n  // uses `babelHelpers.inherits`\n  {\n    class Foo {\n      static static1() {\n        return 1;\n      }\n    }\n    Foo.static2 = function () {\n      return 2;\n    };\n\n    // static methods are inherited!\n    class Bar extends Foo {}\n\n    test.equal(Foo.static1(), 1);\n    test.equal(Foo.static2(), 2);\n    test.equal(Bar.static1(), 1);\n    test.equal(Bar.static2(), 2);\n  }\n\n  {\n    const buf = [];\n    class Foo {\n      constructor() {\n        buf.push('hi');\n      }\n    }\n\n    class Bar extends Foo {}\n\n    new Bar();\n    // derived class with no constructor gets a default constructor\n    // that calls the super constructor\n    test.equal(buf, ['hi']);\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - classes - computed props\", (test) => {\n  {\n    const frob = \"inc\";\n\n    class Foo {\n      static [frob](n) { return n+1; }\n    }\n\n    test.equal(Foo.inc(3), 4);\n  }\n});\n\nif (Meteor.isServer) {\n  // getters and setters don't work in all clients, but they should work\n  // in classes on browsers that support them in the first place, and on\n  // the server.  (Technically they just need a working\n  // Object.defineProperty, found in IE9+ and all modern environments.)\n  Tinytest.add(\"ecmascript - runtime - classes - getters/setters\", (test) => {\n    // uses `babelHelpers.createClass`\n    class Foo {\n      get two() { return 1+1; }\n      static get three() { return 1+1+1; }\n    }\n\n    test.equal((new Foo).two, 2);\n    test.equal(Foo.three, 3);\n  });\n}\n\nTinytest.add(\"ecmascript - runtime - block scope\", (test) => {\n  {\n    const buf = [];\n    const thunks = [];\n    function print(x) {\n      buf.push(x);\n    };\n    function doLater(f) {\n      thunks.push(f);\n    };\n\n    for (let i = 0; i < 3; i++) {\n      print(i);\n    }\n    test.equal(buf, [0, 1, 2]);\n    buf.length = 0;\n\n    for (let i = 0; i < 3; i++) {\n      doLater(() => {\n        print(i);\n      });\n    }\n\n    _.each(thunks, f => f());\n    test.equal(buf, [0, 1, 2]);\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - classes - super\", (test) => {\n  {\n    class Class1 {\n      foo() { return 123; }\n      static bar() { return 1; }\n    }\n    class Class2 extends Class1 {}\n    class Class3 extends Class2 {\n      foo() {\n        return super.foo() + Class3.bar();\n      }\n    }\n\n    test.equal((new Class3).foo(), 124);\n  }\n\n  {\n    class Foo {\n      constructor(value) { this.value = value; }\n      x() { return this.value; }\n    }\n\n    class Bar extends Foo {\n      constructor() { super(123); }\n      x() { return super.x(); }\n    }\n\n    test.equal((new Bar).x(), 123);\n  }\n});\n\nTinytest.add(\"ecmascript - runtime - object rest/spread\", (test) => {\n  const middle = {b:2, c:3};\n  // uses `babelHelpers._extends`\n  const full = {a:1, ...middle, d:4};\n  test.equal(full, {a:1, b:2, c:3, d:4});\n});\n\nTinytest.add(\"ecmascript - runtime - spread args to new\", (test) => {\n\n  const Foo = function (one, two, three) {\n    test.isTrue(this instanceof Foo);\n    test.equal(one, 1);\n    test.equal(two, 2);\n    test.equal(three, 3);\n    this.created = true;\n  };\n\n  const oneTwo = [1, 2];\n\n  // uses `babelHelpers.bind`\n  const foo = new Foo(...oneTwo, 3);\n  test.isTrue(foo.created);\n});\n\nTinytest.add(\"ecmascript - runtime - destructuring\", (test) => {\n  // uses `babelHelpers.objectWithoutProperties` and\n  // `babelHelpers.objectDestructuringEmpty`\n\n  const obj = {a:1, b:2};\n  const {a, ...rest} = obj;\n  test.equal(a, 1);\n  test.equal(rest, {b:2});\n\n  const {} = {};\n\n  test.throws(() => {\n    const {} = null;\n  }, /Cannot destructure undefined/);\n});\n\nTinytest.addAsync(\"ecmascript - runtime - misc support\", (test, done) => {\n  // Verify that the runtime was installed.\n  test.equal(typeof babelHelpers, \"object\");\n\n  class Base {\n    constructor(...args) {\n      this.sum = 0;\n      args.forEach(arg => this.sum += arg);\n    }\n\n    static inherited() {\n      return \"inherited\";\n    }\n  }\n\n  class Derived extends Base {\n    constructor() {\n      super(1, 2, 3);\n    }\n  }\n\n  // Check that static methods are inherited.\n  test.equal(Derived.inherited(), \"inherited\");\n\n  const d = new Derived();\n  test.equal(d.sum, 6);\n\n  const expectedError = new Error(\"expected\");\n\n  Promise.resolve(\"working\").then(result => {\n    test.equal(result, \"working\");\n    throw expectedError;\n  }).catch(error => {\n    test.equal(error, expectedError);\n    if (Meteor.isServer) {\n      const Fiber = Npm.require(\"fibers\");\n      // Make sure the Promise polyfill runs callbacks in a Fiber.\n      test.instanceOf(Fiber.current, Fiber);\n    }\n  }).then(done, error => test.exception(error));\n});\n"]},"hash":"a206cc11fa26b21bb6d7bcad897f387ec2f7acc2"}
